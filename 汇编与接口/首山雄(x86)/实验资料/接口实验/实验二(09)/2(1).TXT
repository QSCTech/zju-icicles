.MODEL SMALL
.data
Port_A DW 0DE00H
Port_B DW 0DE01H
Port_C DW 0DE02H
Port_Ctrl DW 0DE03H

.CODE
.STARTUP

	MOV DX,0DE03H
	MOV AL,90H
	OUT DX,AL
	MOV AH,00H
	MOV BL,80H
	MOV AL,BL
	MOV DX,0DE01H
	OUT DX,AL

L1:	
	MOV DX,0DE00H
	IN  AL,DX
	CMP AL,0FFH
	JZ  EXIT
	CMP AL,AH
	JZ  L1

	MOV BH,AL
	MOV CX,0FFFFH
L2:
	DEC CX
	JNZ L2
	IN  AL,DX
	CMP AL,BH
	JNZ L1

	MOV BH,AL
	MOV CX,0FFFFH
L3:
	DEC CX
	JNZ L3
	IN  AL,DX
	CMP AL,BH
	JNZ L1

	MOV AH,AL
	MOV DX,0DE01H
	ROL BL,1
	MOV AL,BL
	OUT DX,AL
	JMP L1
EXIT:
	MOV AH,4CH
	INT 21H


.EXIT
END

 



